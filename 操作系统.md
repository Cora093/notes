## 操作系统

### 1.概论

1. 操作系统是管理整个计算机软硬件资源的系统软件    
2. 操作系统的功能——对应书上几个章节
   用户接口、进程管理、处理机调度、存储管理、设备管理、文件管理    
3. 发展历程
   无操作系统——单道批处理——多道程序系统——分时操作系统——实时操作系统    
4. 实时分时的比较
   1. 多路性：实时控制系统周期性的对多路现场信息进行采集，分时系统的多路性则与用户有关
   2. 独立性：实时系统中的每个用户在请求时互不干扰，信息采集和对象控制也互不干扰
   3. 及时性：实时系统以控制对象的截止时间确定，一般是毫秒级
   4. 交互性：实时系统的交互性仅限于特定的程序
   5. 可靠性：实时系统要求高可靠性
5. 操作系统基本特征
   1. 并发性：最重要，多个活动在同一时间间隔内发生（区别于并行）
   2. 共享性：多个并发进程共享系统资源，分为互斥访问和同时访问
   3. 虚拟性：物理实体和逻辑物的对应
   4. 异步性：多个进程并发执行，异步推进
6. CS模式
   客户端-服务器模式：客户端+服务器端+网络



### 2.接口

1. 接口的分类 简答
2. 中断机制
   分为硬中断和软中断，通过中断机制完成系统调用



### 3.进程管理

1. 进程的概念——资源分配和独立运行的基本单位
2. 进程顺序执行的特征：顺序性、封闭性、确定性、可再现性
   进程并发执行的特征：间断性、失去封闭性、不可再现性
3. 程序和进程的区分——进程是程序的一次执行
4. 进程的状态转换（可以画图）
   三五七态
5. PCB的概念：进程控制块，是进程实体的一部分，其中记录了进程的当前情况信息和控制信息，PCB是进程存在的**唯一标志**
6. PCB的组织方式 优缺点
   1. 链接方式（队列、链表）
   2. 索引方式（索引表）
7. 进程控制——原语
   原语是管态下的若干条指令执行的过程，类似机器指令
   四条原语 阻塞block 唤醒wakeup 挂起suspend 激活active
8. 进程同步——解决进程间协作关系的手段
   - 临界资源：互斥资源		临界区：访问临界资源的代码
   - 互斥机制的16字准则：空闲让进 忙则等待 有限等待 让权等待
9. **信号量的应用**
   1.实现互斥 2.前趋关系 3.生产者 消费者 4.读者 写者  5.银行 
10. 进程间通信方式
    1. 共享存储器
    2. 消息传递系统
       - 直接通信
       - 间接通信（信箱）
         - 私有信箱
         - 公有信箱
         - 共享信箱

11. 死锁
    - 死锁的概念：多个进程运行过程中（因争夺资源）产生的僵局，如果没有外力作用，他们都无法再向前推进
    - 死锁的产生原因：进程之间竞争资源 且 推进顺序非法
    - 产生死锁的四个条件
       1. 互斥条件：进程互斥使用资源
       2. 占有和等待条件：进程在等待资源时，不释放已有资源
       3. 不剥夺条件：不能抢夺其他进程的资源
       4. 循环等待条件：存在一个循环等待链
    - 处理死锁的四个方法
       1. 不予处理（应用最广泛）
       2. 静态预防：破坏四个产生条件中的一个或多个
       3. 动态避免：在资源动态分配的过程中，用某种方法（银行家算法）阻止系统进入不安全状态
       4. 检测解除：及时检测到死锁，然后回收资源，清除死锁
    - 动态避免算法——**银行家算法**
12. 进程和线程的比较
    1. 包含性：进程可以包含多个线程
    2. 资源分配：进程是占有资源的基本单位，线程一般不拥有系统资源
    3. 并发执行：引入线程后，线程取代进程成为并发的最小单位



### 4.处理机调度

1. 三种调度

   - 高级调度=长程调度=作业调度——把作业从外存调入内存
   - 中级调度=中程调度=平衡负载调度——挂起一些进程来维持合理的内存利用率（虚拟内存）
   - 低级调度=短程调度=进程调度——将CPU分配给各个进程

2. **调度算法** 计算（带权）周转时间

   1. 先来先服务FCFS，不利于短作业
   2. 短作业优先SJF，不利于长作业
   3. 高响应比优先，等待越久优先权越高
      响应比=优先权=1+等待时间/服务时间
   4. 时间片轮转（不考大题），时间片太短时系统开销较大

3. 实时调度算法的分类（选择）

   1. 非抢占式调度算法
      - 非抢占式**轮转**调度算法
      - 非抢占式**优先**调度算法
   2. 抢占式调度算法
      - 基于**时钟中断**的抢占式调度算法
      - **立即抢占**的优先权调度算法

   调度延迟由低到高

4. 两种实时调度算法（选择）

   1. 最早截止时间优先EDF——截止时间越早，优先级越高
      - 非抢占
      - 抢占
   2. 最低松弛度优先LLF——紧急程度越高，优先级越高



### 5.存储管理

1. 存储器的层次（金字塔）
   存储器->高速缓存->主存->磁盘缓存->磁盘->可移动存储介质
   速度越快，容量越小，价格越高

2. 地址变换（简答）
   图5-2

3. 分区分配算法

   |     分区算法     |         查找逻辑         |           优点           |            缺点            |
   | :--------------: | :----------------------: | :----------------------: | :------------------------: |
   |   首次适应算法   |     从头开始顺序查找     |       保留大空闲区       |           效率低           |
   | 循环首次适应算法 | 从上次找到的开始继续查找 | 分布更均匀，减少查找开销 |      缺乏大的空闲分区      |
   |   最佳适应算法   |  将空闲分区从小到大排序  |    找到最佳的分配情况    | 留下许多难以利用的小空闲区 |
   |   最坏适应算法   |  总是挑选最大的空闲分区  |  效率高，对中小作业有利  |      缺乏大的空闲分区      |

4. 内存回收时的四种情况
   图5-6

5. 逻辑地址转物理地址的计算

   分页：除法

   分段：减法

6. 引入快表之后的地址变换过程（简答）
   输入逻辑块号，先在快表（cache中）寻找，如果找到，直接得到物理块号，如果没有找到，再访问页表（内存中），得到物理块号，并将此页表项写入快表中

7. 分页分段的比较

   1. 分页面向系统，分段面向用户，含有意义相对完整的信息
   2. 页的长度固定，段的长度不固定
   3. 分页用一个记忆符即可表示一个地址，而分段既需要段名，也需要段内地址

8. 虚拟存储器的概念

   部分装入：程序开始时，只有使用的部分被加载到内存中，节省内存。

   部分对换：物理内存不足时，操作系统将一些不活跃的页面换出到磁盘上，将需要的页面加载到内存。

9. 内存块分配（选择题）
   按比例**向下取整**：
   例如，如果内存能够提供62个内存物理块，并发进程有P1(有10个页面)和P2(有127个页面)，则进程P1和P2分配到的内存物理块分别为
   b,=(62×10)/(10+127)≈4，b,=(62×127)/(10+127)≈57

10. **页面置换算法** 四种

    - 最佳置换算法OPT：序列向后查找，淘汰最晚出现的
    - 先进先出FIFO：内存中向前查找，总是淘汰在内存中停留最久的
    - 最近最久未使用LRU：序列向前查找，淘汰最近最久没访问的
    - 时钟算法：维护一个指针和访问位



### 6.设备管理

1. IO通道的类型（简答）

   - 字节多路通道：字节为单位，分时共享传输数据
   - 数组选择通道：一组数据为单位，但无法并发
   - 数组多路通道：一组数据为单位，结合**传送速度高**和**分时并发**的优点

2. IO控制方式 四种（简答）

   1. 程序直接控制：轮询，CPU利用率低
   2. 中断方式：字节为单位，频繁发生中断，效率较低
   3. DMA方式：数据块为单位，提高速度，但需要硬件
   4. 通道控制方式：需要硬件，更快，更贵

3. 缓冲池（简答）
   设在IO设备和CPU之间，用于缓和速度不匹配的矛盾
   三个队列emq、inq、outq
   图6-11

4. 设备独立性的概念
   逻辑设备和物理设备相互独立，用户不直接访问物理设备，通过逻辑设备表**映射**到物理设备

5. 磁盘结构
   盘片、磁道、扇区、磁头

6. 磁盘访问时间计算
   寻道时间Ts=m*n+s

   旋转时间T=1/2r

   传输时间Tt=b/rN

   访问总时间 = Ts+T+Tt

7. **磁盘调度算法**

   - 先来先服务FCFS：简单，效率低
   - 最短寻道时间SSTF：贪心，局部最优，但容易产生饥饿问题，对远处磁道不公平
   - 扫描SCAN：按照当前移动方向，到头再更换方向
   - 循环扫描CSCAN：总是按同一方向单向运动，不更换方向，对SCAN进行优化

### 7.大题

1. **信号量** 1互斥 2前趋 3生产消费 4生产消费的变形 5读者写者
2. **银行家算法** work表 安全性检查
3. **调度算法** 四个算法 时间片不考
4. 分页分段的地址转换  除法减法
5. **请求分页** 计算缺页率 
6. **计算平均寻道时间** 四个算法
7. 优化分布 学习通题目

