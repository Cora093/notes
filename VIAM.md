## VIAM

### 用户管理

1. 查询用户列表（分页）

   ![image-20230705113102923](https://cora-typora-test-2023.oss-cn-shanghai.aliyuncs.com/pics/image-20230705113102923.png)

   1. 分页构造器（当前页， 每页记录数）
   2. 条件构造器，对账号和姓名模糊查询
   3. 查询数据库（不包含密码的字段）
   4. 查询对应角色关系
   5. 封装返回

2. 新增用户

   1. 判断是否存在
   5. 设置密码为MD5加密的默认密码
   6. 插入数据库
   7. 添加User和Role的关联信息
   8. 获取id返回
   
3. 更新用户

   1. 判断是否存在
   2. 更新User信息
   3. 更新User和Role的关联信息
   4. 获取id返回

4. 删除用户

   1. 判断是否存在
   2. 删除User和Role的关联信息
   3. 删除User信息

5. 查询用户信息

6. 重置用户密码

   1. 判断是否存在
   2. 设置密码为MD5加密的默认密码
   3. 设置为需要修改密码 
   4. 更新到数据库

7. 修改用户密码

   1. 验证旧密码是否正确
   2. 验证新密码不能和旧密码相同
   3. 删除token
   4. 设置新密码 ~~加密？~~
   5. 设置为不需要修改密码
   6. 更新到数据库

8. 修改用户角色

   1. 判断User存在 且 User和Role的关联信息存在
   2. 通过account查询关联信息
   3. 删除旧的关联信息 
   4. 添加新的关联信息到数据库

9. 构造器注入对象
   ![image-20230706113611802](https://cora-typora-test-2023.oss-cn-shanghai.aliyuncs.com/pics/image-20230706113611802.png)
   通过lombok提供的@RequiredArgsConstructor注解，生成构造器，使Spring框架自动注入对象，而不用使用@Resource或@Autowired注解

10. 

